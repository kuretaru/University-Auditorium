# Система бронирования аудиторий университета

**English version is availible here: [README_en.md](README_en.md)**

## Описание

Этот проект представляет собой веб-приложение, созданное с использованием Flask, которое позволяет пользователям бронировать аудитории университета.  Приложение поддерживает несколько языков и предоставляет удобный интерфейс для управления бронированиями.  Реализованы аутентификация пользователей, список аудиторий, создание бронирований и базовая страница профиля.

## Функциональные возможности

*   **Аутентификация пользователей:**
    *   Регистрация с указанием имени пользователя, адреса электронной почты, пароля и опционального статуса преподавателя.
    *   Вход с использованием адреса электронной почты и пароля.
    *   Хеширование паролей для обеспечения безопасности.
    *   Функция "Запомнить меня".
    *   Выход из системы.
*   **Бронирование аудиторий:**
    *   Аутентифицированные пользователи могут бронировать аудитории.
    *   Форма бронирования включает:
        *   Название
        *   Номер аудитории (из предопределенного списка)
        *   Дату
        *   Время
    *   Отображение предстоящих бронирований для вошедшего в систему пользователя.
    *   Базовое удаление собственных бронирований.
*   **Поддержка нескольких языков:**
    *   Английский (en)
    *   Китайский (cn)
    *   Немецкий (de)
    *   Русский (ru)
    *   Выбор языка сохраняется между сеансами (с использованием сессий Flask). Языковые предпочтения пользователя при регистрации
*   **База данных:**
    *   Используется SQLAlchemy для взаимодействия с базой данных.
    *   База данных SQLite для разработки (легко переключается на другие базы данных).
    *   Миграции базы данных с помощью Flask-Migrate.
* **Базовый пользовательский интерфейс**
      * Простой HTML/CSS.
      * Базовая отзывчивость.
* Обработка ошибок
    * Базовая проверка форм.
    * Отображение сообщений об ошибках пользователю.

## Используемые технологии

*   **Python:** Основной язык программирования.
*   **Flask:** Микрофреймворк для Python.
*   **Flask-SQLAlchemy:** Расширение Flask для легкой интеграции SQLAlchemy.
*   **Flask-Migrate:** Расширение Flask для миграций базы данных.
*   **Flask-WTF:** Расширение Flask для обработки и проверки форм.
*   **Flask-Login:** Расширение Flask для управления сеансами пользователей.
*   **Werkzeug:** Предоставляет утилиты для WSGI-приложений, включая хеширование паролей.
*   **python-dotenv:** Загружает переменные окружения из файла `.env`.
*   **HTML/CSS:** Для структуры и стилизации фронтенда.
*   **SQLite:**  Система управления базами данных.

## Структура проекта

```
University-Auditorium/
├── core/                        # Основная логика приложения
│   ├── __init__.py              # Инициализирует основное приложение
│   ├── auth/                    # Модуль аутентификации
│   │   ├── __init__.py          # Инициализирует blueprint аутентификации
│   │   ├── forms.py             # Формы аутентификации (Login, Registration)
│   │   ├── models.py            # Модель User
│   │   ├── templates/           # Шаблоны аутентификации
│   │   │   ├── de/             # Немецкий перевод
│   │   │   ├── base.html
│   │   │   ├── login.html
│   │   │   └── register.html
│   │   └── views.py             # Представления аутентификации (login, register, logout)
│   ├── audithory/                # Модуль бронирования аудиторий
│   │   ├── __init__.py          # Инициализирует blueprint курсов
│   │   ├── forms.py             # Форма бронирования
│   │   ├── models.py            # Модель Number (для номеров аудиторий)
│   │   ├── templates/           # Шаблоны бронирования
│   │   │   └── audithory/
│   │   │       └── book-audithory.html   # Основная страница бронирования
│   │   └── views.py             # Представления бронирования
│   ├── static/                  # Статические файлы (CSS)
│   │   └── style.css
│   ├── templates/               # Базовые и языковые шаблоны
│   │    ├── audithory/
│   │    │     └──book-audithory.html
│   │    ├── cn/                  # Китайские шаблоны
│   │    │   ├── classes.html
│   │    │   ├── contact.html
│   │    │   └── index.html
│   │    ├── de/                  # Немецкие шаблоны
│   │    │   ├── classes.html
│   │    │   ├── contact.html
│   │    │   └── index.html
│   │    ├── base.html            # Базовый шаблон
│   │    └── index.html             # Главная индексная страница
│   ├── models.py                # Основные модели приложения (Users, Audithories)
│   ├── views.py             # Основные представления приложения (смена языка)
│   └── utils.py              # Вспомогательные функции
├── migrations/                  # Файлы миграции базы данных
├── venv/                        # Виртуальное окружение (не включено в предоставленный список файлов, но необходимо)
├── config.py                    # Конфигурация приложения
├── main.py                      # Точка входа в приложение
└── users.db                     # Файл базы данных SQLite (создается автоматически)
└── .env                         # Содержит FLASK_SECRET_KEY и DATABASE_URL

```

## Установка и запуск

1.  **Клонируйте репозиторий:**

    ```bash
    git clone <repository_url>
    cd University-Auditorium
    ```

2.  **Создайте виртуальное окружение (рекомендуется):**

    ```bash
    python3 -m venv venv
    source venv/bin/activate  # В Windows: venv\Scripts\activate
    ```

3.  **Установите зависимости:**

    ```bash
    pip install -r requirements.txt
    ```
    (Вам нужно будет создать `requirements.txt` на основе предоставленного кода: `Flask Flask-SQLAlchemy Flask-Migrate Flask-WTF Flask-Login Werkzeug python-dotenv`)

4.  **Настройте переменные окружения:**

    *   Создайте файл `.env` в корневом каталоге.
    *   Добавьте следующие переменные в файл `.env`:

        ```
        FLASK_SECRET_KEY=<your_secret_key>  # Сгенерируйте надежный, случайный секретный ключ
        DATABASE_URL=sqlite:///users.db     # Или URL вашей предпочитаемой базы данных
        ```
     Крайне важно хранить FLASK_SECRET_KEY в секрете в продакшене.

5.  **Инициализируйте и выполните миграцию базы данных:**

    ```bash
    flask db init
    flask db migrate -m "Initial migration"
    flask db upgrade
    ```

6.  **Запустите приложение:**

    ```bash
    python main.py
    ```

    Приложение будет доступно по адресу `http://localhost:8080`.

## Миграции базы данных

Всякий раз, когда вы вносите изменения в модели базы данных (в `core/models.py` или `core/audithory/models.py`), вам необходимо создать и применить миграцию:

1.  **Создайте миграцию:**

    ```bash
    flask db migrate -m "Описание ваших изменений"
    ```

2.  **Примените миграцию:**

    ```bash
    flask db upgrade
    ```

## Улучшения и будущие доработки

*   **Доступность аудиторий:**
    *   Реализовать систему проверки конфликтов бронирований.
    *   Визуально отображать доступные временные интервалы (например, календарь).
*   **Панель администратора:**
    *   Создать интерфейс администратора для управления пользователями, аудиториями и бронированиями.
    *   Разрешить администраторам утверждать/отклонять запросы на бронирование.
*   **Уведомления по электронной почте:**
    *   Отправлять подтверждения и напоминания о бронированиях по электронной почте.
    *   Уведомлять пользователей об изменении статуса бронирования.
* **Роли пользователей:**
    *   Реализовать более детальные роли пользователей (например, студент, преподаватель, сотрудник).
    *   Ограничить доступ к определенным функциям в зависимости от роли.
*   **Поиск и фильтрация:**
    *   Разрешить пользователям искать аудитории по вместимости, оснащению и т. д.
    *   Добавить параметры фильтрации в список бронирований.
*   **Улучшенный UI/UX:**
    *   Использовать фронтенд-фреймворк (например, Bootstrap, Tailwind CSS) для более отточенного внешнего вида.
    *   Добавить JavaScript для динамического взаимодействия.
    *   Улучшить отзывчивость для разных размеров экрана.
*   **Тестирование:**
    *   Написать модульные и интеграционные тесты для обеспечения качества кода и предотвращения регрессий.
* **Развертывание:**
     * Предоставить инструкции по развертыванию приложения в production-среде (например, с использованием Gunicorn, Nginx и сервера базы данных, такого как PostgreSQL).
* **Обработка ошибок:**
     * Внедрить более надежную обработку ошибок и ведение журнала.
* **Безопасность:**
    * Добавить защиту от распространенных веб-уязвимостей (например, CSRF, XSS).
    * Реализовать ограничение скорости для предотвращения злоупотреблений.
    * Рассмотреть возможность использования HTTPS.
* **Рефакторинг:**
    * Разбить большие функции на более мелкие и управляемые.
    * Улучшить организацию и читаемость кода.
